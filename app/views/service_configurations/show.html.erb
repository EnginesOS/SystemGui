<div class="col-sm-12">

	<h2 class=''><%= content_tag(:i, "", class: "fa fa-wrench") + " Configure " + @service.label %></h2>

	<%= link_to content_tag(:i, "", class: "fa fa-arrow-left") + ' Back', control_panel_path, class: "btn btn-warning btn-lg trigger-response-modal" %>

	<div class="top-gap">

		<% if @service.configurators.present? %>

			<% @service.configurators.each do |configurator| %>
		
			<div class="panel panel-default">
				<div class="panel-heading">
		  			<%= configurator[:label] %><br>
		  			<small><%= configurator[:description] %></small>
				</div>
				<div class="panel-body">
					<% existing_variables = @service.service_configuration_variables_for(configurator[:name]) %>
					<% if existing_variables.present? %>
						<% existing_variables.each do |variable_name, variable_value| %>
			  				<% variable_definition = configurator[:params][variable_name]
								if variable_definition.present? %>
									<label><%= variable_definition[:label] %></label>
									<% if variable_definition[:field_type].include? 'password' %>
										<%= variable_value.length.times.map{ '*' }.join() %>
									<% else %>
										<%= variable_value %>
									<% end %><br>
								<% else %>
					  				<label style="color: #f00;"><%= variable_name.to_s %></label> <%= variable_value %>
					  				<small style="color: #f00;"><i>This variable is not properly defined.</i></small><br>
								<% end %>
			  			<% end %>
			  		<% else %>
			  			Unable to load variables. Check that service is running.
			  		<% end %>
		  			<%= link_to content_tag(:i, "", class: "fa fa-edit") + ' Edit',
		  					edit_service_configuration_path(service_name: @service.container_name, configurator_name: configurator[:name]),
		  					class: "btn btn-default btn-lg trigger-response-modal pull-right" %>
				</div>
			</div>
		
			<% end %>

		<% else %>
			This service does not have settings to configure.
		<% end %>
		
	</div>

</div>
