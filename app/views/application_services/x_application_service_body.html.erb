<% if false %>

<% service_variables = application_service.attached_service_hash[:variables] %>
<% configurator = application_service.service.attached_service_hash[:variables] %>
<% if service_variables.present? %>
	<% service_variables.each do |variable_name, variable_value| %>
		<% variable_definition = configurator[:params][variable_name]
			if variable_definition.present? %>
				<label><%= variable_definition[:label] %></label>
				<% if variable_definition[:field_type].include? 'password' %>
					<%= variable_value.length.times.map{ '*' }.join() %>
				<% else %>
					<%= variable_value %>
				<% end %><br>
			<% else %>
  				<label style="color: #f00;"><%= variable_name.to_s %></label> <%= variable_value %>
  				<small style="color: #f00;"><i>This variable is not properly defined.</i></small><br>
			<% end %>
	<% end %>
<% else %>
	Unable to load variables. Check that service is running.
<% end %>


@service.service_configuration_variables_for(configurator[:name])
<% end %>

<%= application_service.attached_service_hash %>





<% if application_service.persistant %>

	<% if application_service.available_subservices.present? %>
	
	<div class="dropdown pull-right">
	
		<button class="btn btn-lg btn-default dropdown-toggle" type="button" data-toggle="dropdown">
			<%= content_tag(:i, "", class: "fa fa-plus-circle") + " Add subservice" %>
			<span class="caret"></span>
		</button>
		<ul class="dropdown-menu" role="menu">
			<% application_service.available_subservices.each do |available_subservice| %>
			<li>
				<%= link_to(
				available_subservice[:title],
				new_application_subservice_path(
					application_subservice: {
						application_name: application_service.application.container_name,
						parent_service_handle: application_service.service_handle,
						parent_publisher_namespace: application_service.publisher_namespace,
						parent_type_path: application_service.type_path,
						parent_title: application_service.title,
						type_path: available_subservice[:type_path],
						publisher_namespace: available_subservice[:publisher_namespace]
					}
				),
				class: "btn-lg trigger-response-modal") %>
	
			</li>
			<% end %>
	
		</ul>
	</div>
	
	<% else %>
		There are no subservices available for this service.
	<% end %>

	<%#= application_service.application_subservices.size %>


	<% application_service.application_subservices.each do |application_subservice| %>
		<%= application_subservice.to_json %>
	<% end %>

<% else %>

<div class="dropdown pull-right">

	<button class="btn btn-lg btn-default dropdown-toggle" type="button" data-toggle="dropdown">
		<%= content_tag(:i, "", class: "fa fa-crosshairs") + " Actions" %>
		<span class="caret"></span>
	</button>
	<ul class="dropdown-menu" role="menu">

		<% if false # [:remove, :register, :deregister, :reregister].each do |service_action| %>
		<li>
			<%= link_to(
			service_action.to_s.titleize,
			registration_attached_services_path(
			application_name: @services_properties.application_name,
			service_action: service_action,
			service: {
			type_path: application_service.type_path,
			publisher_namespace: application_service.publisher_namespace,
			parent_engine: @services_properties.application_name,
			service_handle: application_service.service_handle
			}
			),
			class: "btn-lg trigger-response-modal") %>
		</li>
		<% end %>

	</ul>
</div>

<% end %>