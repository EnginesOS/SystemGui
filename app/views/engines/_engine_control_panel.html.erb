<% state= @engine.read_state
 indicator_class = "indicator_" + state
%>

<div class="btn-group btn-group-lg">
  <button type="button" class="btn btn-default dropdown-toggle engine-gadget" data-toggle="dropdown">
    <%=@engine.containerName %><br><%= content_tag(:i, "", class: "fa fa-circle indicator " + indicator_class) %>
  </button>
  <ul class="dropdown-menu engine-gadget-dropdown-menu" role="menu">
    <li><div class="dropdown-title" %><%=@engine.containerName %></div></li>
    <% if state == "running" %>
      <li><div class="<%= indicator_class %> dropdown-title"><%= content_tag(:i, "", class: "fa fa-circle-o-notch fa-spin") %> Running</div></li>
      <li><%= link_to content_tag(:i, "", class: "fa fa-stop") + " Stop", stop_engine_path(@engine.containerName) %></li>
      <li><%= link_to content_tag(:i, "", class: "fa fa-pause") + " Pause", pause_engine_path(@engine.containerName) %></li>
    <% elsif state == "paused" %>
      <li><div class="<%= indicator_class %> dropdown-title"><%= content_tag(:i, "", class: "fa fa-circle-o-notch") %> Paused</div></li>
      <li><%= link_to content_tag(:i, "", class: "fa fa-pause") + " Unpause", unpause_engine_path(@engine.containerName) %></li>
    <% elsif state == "stopped" %>
      <li><div class="<%= indicator_class %> dropdown-title"><%= content_tag(:i, "", class: "fa fa-circle-o-notch") %> Stopped</div></li>
      <li><%= link_to content_tag(:i, "", class: "fa fa-play") + " Start", start_engine_path(@engine.containerName) %></li>
      <li><%= link_to content_tag(:i, "", class: "fa fa-circle-o") + " Destroy", destroy_engine_engine_path(@engine.containerName) %></li>
      <li class="divider"></li>
      <li><%= link_to content_tag(:i, "", class: "fa fa-wrench") + " Recreate", recreate_engine_path(@engine.containerName) %> </li>
    <% elsif  state == "nocontainer" %>   
      <li><div class="<%= indicator_class %> dropdown-title"><%= content_tag(:i, "", class: "fa fa-circle-o") %> Unbuilt</div></li>
      <li><%= link_to content_tag(:i, "", class: "fa fa-wrench") + " Create", create_engine_engine_path(id: @engine.containerName) %></li>
      <li><%= link_to content_tag(:i, "", class: "fa fa-trash-o") + " Delete", deleteimage_engine_path(@engine.containerName) %></li> 
    <% else %>
       <li>no state</li>
    <%  end %>
    <li class="divider"></li>
    <li><%= link_to content_tag(:i, "", class: "fa fa-info") + " Advanced", "#", data: {toggle: "modal", target: "#modal_" + @engine.containerName, container: @engine.containerName, controller: "engines" }, role: "button", class: "advanced_menu_item" %>
    </li>
    <li class="divider"></li>
     <li><%= link_to content_tag(:i, "", class: "fa fa-globe") + " " + @engine.fqdn, "http://" + @engine.fqdn, target: "_blank"%></li>
  </ul>
</div>

<div class="modal fade" id="modal_<%= @engine.containerName %>" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title"><%= content_tag(:i, "", class: "fa fa-info") %> Advanced</h4>
      </div>
      <div class="modal-body" id="modal_<%= @engine.containerName %>_body">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->


     

