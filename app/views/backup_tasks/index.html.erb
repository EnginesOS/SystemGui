<div class="col-sm-12 top-gap backup-tasks">
	<h2><i class="fa fa-upload"></i> Backups</h2>
	<%= link_to content_tag(:i, "", class: "fa fa-arrow-left") + ' Back', control_panel_path, class: "btn btn-warning btn-lg trigger-response-modal" %>


	<% @softwares.each do |software| %>
	<% engine_name = software.engine_name %>
		<div class="backup-panel">
			<h3><%= software.engine_name %></h3>
	
			<div>
				<%  BackupTask.backupable_services(software.engine_name).each do |backupable_service| %>
					<div class="panel panel-info top-gap">
						<div class="panel-heading">
							
						    <%= backupable_service[:title] %>
							<small>
								<br>
								<%= backupable_service[:description] %>
								(<%= backupable_service[:publisher_namespace].to_s + " " + backupable_service[:type_path].to_s%>)
								<br>
							</small>
										
							<%#= backupable_service %>
						</div>
						<div class="panel-body">
							<%= link_to content_tag(:i, "", class: "fa fa-plus") + ' New backup',
							new_backup_task_path(backup_task: backupable_service.slice(:publisher_namespace, :type_path, :parent_engine, :service_handle)),
							class: "btn btn-lg btn-primary backup-task-action-button trigger-response-modal pull-right" %>
						</div>
					</div>
				<% end %>
			</div>
		</div>
	<% end %>
</div>

<% if false %>

		<h4><i class="fa fa-hdd-o"></i> <%= volume_name %> files</h4>
		<% volume_backup_tasks = volumes_backup_tasks.select { |volume_backup_task| volume_backup_task.sourceName == volume_name} %>
		<% volume_backup_tasks.each.map(&:name).each do |backup_task_name| %>
		<div>
			<%= link_to content_tag(:i, "", class: "fa fa-trash"), backup_task_path(backup_task_name), method: :delete, class: "btn btn-default btn-sm backup-task-action-button trigger-response-modal" %>
			<%= backup_task_name %>
		</div>
		<% end %>
		<%= link_to content_tag(:i, "", class: "fa fa-plus"), new_backup_task_path(backup_task: {source_name: volume_name, engine_name: engine_name, backup_type: "fs"}), class: "btn btn-primary btn-sm backup-task-action-button trigger-response-modal" %>
		<br>
	</div>
<% end %>

	<%= EnginesBackupTask.all %>
	<%= BackupTask.all %>
